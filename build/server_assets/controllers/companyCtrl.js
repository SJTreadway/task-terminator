'use strict';

var mongoose = require('mongoose');
var Company = require('../models/Company.js');

module.exports = {
	allCompanies: function allCompanies(req, res) {
		Company.find().populate('departments').populate('positions').populate('employees').exec().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			console.log(err);
			return res.status(500).end();
		});
	},
	newCompany: function newCompany(req, res) {
		var company = new Company(req.body);
		company.save().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			return res.status(500).end();
		});
	},
	getOneCompany: function getOneCompany(req, res) {
		console.log(req.params.id);
		Company.findById({ _id: req.params.id }).populate('departments').populate('positions').populate('employees').exec().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			console.log(err.message);
			return res.status(500).end();
		});
	}
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlcl9hc3NldHMvY29udHJvbGxlcnMvY29tcGFueUN0cmwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLFdBQVcsUUFBUSxVQUFSLENBQVg7QUFDTixJQUFNLFVBQVUsUUFBUSxzQkFBUixDQUFWOztBQUVOLE9BQU8sT0FBUCxHQUFpQjtBQUVoQixxQ0FBYSxLQUFLLEtBQUs7QUFDdEIsVUFBUSxJQUFSLEdBQ0MsUUFERCxDQUNVLGFBRFYsRUFFQyxRQUZELENBRVUsV0FGVixFQUdDLFFBSEQsQ0FHVSxXQUhWLEVBSUMsSUFKRCxHQUtDLElBTEQsQ0FLTSxVQUFDLE1BQUQsRUFBWTtBQUNqQixVQUFPLElBQUksSUFBSixDQUFTLE1BQVQsQ0FBUCxDQURpQjtHQUFaLENBTE4sQ0FPRyxLQVBILENBT1MsVUFBQyxHQUFELEVBQVM7QUFDakIsV0FBUSxHQUFSLENBQVksR0FBWixFQURpQjtBQUVqQixVQUFPLElBQUksTUFBSixDQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBUCxDQUZpQjtHQUFULENBUFQsQ0FEc0I7RUFGUDtBQWdCaEIsaUNBQVcsS0FBSyxLQUFLO0FBQ3BCLE1BQU0sVUFBVSxJQUFJLE9BQUosQ0FBWSxJQUFJLElBQUosQ0FBdEIsQ0FEYztBQUVwQixVQUFRLElBQVIsR0FBZSxJQUFmLENBQW9CLFVBQUMsTUFBRCxFQUFZO0FBQy9CLFVBQU8sSUFBSSxJQUFKLENBQVMsTUFBVCxDQUFQLENBRCtCO0dBQVosQ0FBcEIsQ0FFRyxLQUZILENBRVMsVUFBQyxHQUFELEVBQVM7QUFDakIsVUFBTyxJQUFJLE1BQUosQ0FBVyxHQUFYLEVBQWdCLEdBQWhCLEVBQVAsQ0FEaUI7R0FBVCxDQUZULENBRm9CO0VBaEJMO0FBeUJoQix1Q0FBYyxLQUFJLEtBQUk7QUFDckIsVUFBUSxHQUFSLENBQVksSUFBSSxNQUFKLENBQVcsRUFBWCxDQUFaLENBRHFCO0FBRXJCLFVBQVEsUUFBUixDQUFpQixFQUFDLEtBQUssSUFBSSxNQUFKLENBQVcsRUFBWCxFQUF2QixFQUNDLFFBREQsQ0FDVSxhQURWLEVBRUMsUUFGRCxDQUVVLFdBRlYsRUFHQyxRQUhELENBR1UsV0FIVixFQUlDLElBSkQsR0FLQyxJQUxELENBS00sVUFBQyxNQUFELEVBQVk7QUFDakIsVUFBTyxJQUFJLElBQUosQ0FBUyxNQUFULENBQVAsQ0FEaUI7R0FBWixDQUxOLENBT0csS0FQSCxDQU9TLFVBQUMsR0FBRCxFQUFRO0FBQ2hCLFdBQVEsR0FBUixDQUFZLElBQUksT0FBSixDQUFaLENBRGdCO0FBRWhCLFVBQU8sSUFBSSxNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixFQUFQLENBRmdCO0dBQVIsQ0FQVCxDQUZxQjtFQXpCTjtDQUFqQiIsImZpbGUiOiJzZXJ2ZXJfYXNzZXRzL2NvbnRyb2xsZXJzL2NvbXBhbnlDdHJsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5jb25zdCBDb21wYW55ID0gcmVxdWlyZSgnLi4vbW9kZWxzL0NvbXBhbnkuanMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuXHRhbGxDb21wYW5pZXMocmVxLCByZXMpIHtcclxuXHRcdENvbXBhbnkuZmluZCgpXHJcblx0XHQucG9wdWxhdGUoJ2RlcGFydG1lbnRzJylcclxuXHRcdC5wb3B1bGF0ZSgncG9zaXRpb25zJylcclxuXHRcdC5wb3B1bGF0ZSgnZW1wbG95ZWVzJylcclxuXHRcdC5leGVjKClcclxuXHRcdC50aGVuKChyZXN1bHQpID0+IHtcclxuXHRcdFx0cmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcblx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycik7XHJcblx0XHRcdHJldHVybiByZXMuc3RhdHVzKDUwMCkuZW5kKCk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRuZXdDb21wYW55KHJlcSwgcmVzKSB7XHJcblx0XHRjb25zdCBjb21wYW55ID0gbmV3IENvbXBhbnkocmVxLmJvZHkpO1xyXG5cdFx0Y29tcGFueS5zYXZlKCkudGhlbigocmVzdWx0KSA9PiB7XHJcblx0XHRcdHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG5cdFx0fSkuY2F0Y2goKGVycikgPT4ge1xyXG5cdFx0XHRyZXR1cm4gcmVzLnN0YXR1cyg1MDApLmVuZCgpO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Z2V0T25lQ29tcGFueShyZXEscmVzKXtcclxuXHRcdGNvbnNvbGUubG9nKHJlcS5wYXJhbXMuaWQpO1xyXG5cdFx0Q29tcGFueS5maW5kQnlJZCh7X2lkOiByZXEucGFyYW1zLmlkfSlcclxuXHRcdC5wb3B1bGF0ZSgnZGVwYXJ0bWVudHMnKVxyXG5cdFx0LnBvcHVsYXRlKCdwb3NpdGlvbnMnKVxyXG5cdFx0LnBvcHVsYXRlKCdlbXBsb3llZXMnKVxyXG5cdFx0LmV4ZWMoKVxyXG5cdFx0LnRoZW4oKHJlc3VsdCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuXHRcdH0pLmNhdGNoKChlcnIpPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnIubWVzc2FnZSlcclxuXHRcdFx0cmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5lbmQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcblxyXG59O1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
