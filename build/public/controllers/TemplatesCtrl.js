'use strict';

angular.module('terminatorApp').controller('TemplatesCtrl', function ($scope, TemplatesSvc, $state, $stateParams, CompanySvc) {

	$scope.templateID = $stateParams.id;

	$scope.newTask = {
		assignment: {
			departments: '',
			positions: '',
			employees: ''
		}
	};

	$scope.newTasksArr = [];

	$scope.getCompany = function () {
		CompanySvc.getCompanies().then(function (res) {
			console.log(res);
			$scope.companies = res.data;
		});
	}();

	$scope.saveTask = function (newTask) {
		console.log(newTask);
		$scope.newTasksArr.push(newTask);
		console.log($scope.newTasksArr);
		$scope.newTask = {
			assignment: {
				departments: '',
				positions: '',
				employees: ''
			}
		};
		// $scope.selectedAssign = null; tryig to clear drop downs with this.
	};

	$scope.addTasks = function (newTasksArr) {
		TemplatesSvc.postTasks(newTasksArr, $scope.templateID).then(function (results) {
			console.log("Tasks added successfully", results);
			// $state.go('projects');
		});
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpYy9jb250cm9sbGVycy9UZW1wbGF0ZXNDdHJsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsUUFBUSxNQUFSLENBQWUsZUFBZixFQUFnQyxVQUFoQyxDQUEyQyxlQUEzQyxFQUE0RCxVQUFTLE1BQVQsRUFBaUIsWUFBakIsRUFBK0IsTUFBL0IsRUFBdUMsWUFBdkMsRUFBcUQsVUFBckQsRUFBaUU7O0FBRTVILFFBQU8sVUFBUCxHQUFvQixhQUFhLEVBQWIsQ0FGd0c7O0FBSTVILFFBQU8sT0FBUCxHQUFpQjtBQUNoQixjQUFZO0FBQ1gsZ0JBQWEsRUFBYjtBQUNBLGNBQVcsRUFBWDtBQUNBLGNBQVcsRUFBWDtHQUhEO0VBREQsQ0FKNEg7O0FBWTVILFFBQU8sV0FBUCxHQUFxQixFQUFyQixDQVo0SDs7QUFjNUgsUUFBTyxVQUFQLEdBQW9CLFlBQVc7QUFDM0IsYUFBVyxZQUFYLEdBQTBCLElBQTFCLENBQStCLFVBQVMsR0FBVCxFQUFjO0FBQzNDLFdBQVEsR0FBUixDQUFZLEdBQVosRUFEMkM7QUFFM0MsVUFBTyxTQUFQLEdBQW1CLElBQUksSUFBSixDQUZ3QjtHQUFkLENBQS9CLENBRDJCO0VBQVgsRUFBcEIsQ0FkNEg7O0FBcUI1SCxRQUFPLFFBQVAsR0FBa0IsVUFBUyxPQUFULEVBQWtCO0FBQ25DLFVBQVEsR0FBUixDQUFZLE9BQVosRUFEbUM7QUFFbkMsU0FBTyxXQUFQLENBQW1CLElBQW5CLENBQXdCLE9BQXhCLEVBRm1DO0FBR25DLFVBQVEsR0FBUixDQUFZLE9BQU8sV0FBUCxDQUFaLENBSG1DO0FBSW5DLFNBQU8sT0FBUCxHQUFpQjtBQUNoQixlQUFZO0FBQ1gsaUJBQWEsRUFBYjtBQUNBLGVBQVcsRUFBWDtBQUNBLGVBQVcsRUFBWDtJQUhEO0dBREQ7O0FBSm1DLEVBQWxCLENBckIwRzs7QUFtQzVILFFBQU8sUUFBUCxHQUFrQixVQUFTLFdBQVQsRUFBc0I7QUFDdkMsZUFBYSxTQUFiLENBQXVCLFdBQXZCLEVBQW9DLE9BQU8sVUFBUCxDQUFwQyxDQUF1RCxJQUF2RCxDQUE0RCxVQUFTLE9BQVQsRUFBa0I7QUFDN0UsV0FBUSxHQUFSLENBQVksMEJBQVosRUFBd0MsT0FBeEM7O0FBRDZFLEdBQWxCLENBQTVELENBRHVDO0VBQXRCLENBbkMwRztDQUFqRSxDQUE1RCIsImZpbGUiOiJwdWJsaWMvY29udHJvbGxlcnMvVGVtcGxhdGVzQ3RybC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCd0ZXJtaW5hdG9yQXBwJykuY29udHJvbGxlcignVGVtcGxhdGVzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgVGVtcGxhdGVzU3ZjLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgQ29tcGFueVN2Yykge1xyXG5cclxuXHQkc2NvcGUudGVtcGxhdGVJRCA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuXHJcblx0JHNjb3BlLm5ld1Rhc2sgPSB7XHJcblx0XHRhc3NpZ25tZW50OiB7XHJcblx0XHRcdGRlcGFydG1lbnRzOiAnJyxcclxuXHRcdFx0cG9zaXRpb25zOiAnJyxcclxuXHRcdFx0ZW1wbG95ZWVzOiAnJ1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCRzY29wZS5uZXdUYXNrc0FyciA9IFtdO1xyXG5cclxuXHQkc2NvcGUuZ2V0Q29tcGFueSA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICBDb21wYW55U3ZjLmdldENvbXBhbmllcygpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcblx0ICAgICAgY29uc29sZS5sb2cocmVzKVxyXG5cdCAgICAgICRzY29wZS5jb21wYW5pZXMgPSByZXMuZGF0YTtcclxuXHQgICAgfSk7XHJcbiAgXHR9KCk7XHJcblxyXG5cdCRzY29wZS5zYXZlVGFzayA9IGZ1bmN0aW9uKG5ld1Rhc2spIHtcclxuXHRcdGNvbnNvbGUubG9nKG5ld1Rhc2spO1xyXG5cdFx0JHNjb3BlLm5ld1Rhc2tzQXJyLnB1c2gobmV3VGFzayk7XHJcblx0XHRjb25zb2xlLmxvZygkc2NvcGUubmV3VGFza3NBcnIpO1xyXG5cdFx0JHNjb3BlLm5ld1Rhc2sgPSB7XHJcblx0XHRcdGFzc2lnbm1lbnQ6IHtcclxuXHRcdFx0XHRkZXBhcnRtZW50czogJycsXHJcblx0XHRcdFx0cG9zaXRpb25zOiAnJyxcclxuXHRcdFx0XHRlbXBsb3llZXM6ICcnXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHQvLyAkc2NvcGUuc2VsZWN0ZWRBc3NpZ24gPSBudWxsOyB0cnlpZyB0byBjbGVhciBkcm9wIGRvd25zIHdpdGggdGhpcy5cclxuXHR9XHJcblxyXG5cdCRzY29wZS5hZGRUYXNrcyA9IGZ1bmN0aW9uKG5ld1Rhc2tzQXJyKSB7XHJcblx0XHRUZW1wbGF0ZXNTdmMucG9zdFRhc2tzKG5ld1Rhc2tzQXJyLCAkc2NvcGUudGVtcGxhdGVJRCkudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiVGFza3MgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIsIHJlc3VsdHMpO1xyXG5cdFx0XHQvLyAkc3RhdGUuZ28oJ3Byb2plY3RzJyk7XHJcblx0XHR9KVxyXG5cdH1cclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
